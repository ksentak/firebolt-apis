{
    "openrpc": "1.2.4",
    "info": {
        "title": "MediaInfo",
        "description": "A module for query info about the media currently in the media pipeline (either playing or paused).",
        "version": "0.0.0"
    },
    "methods": [
        {
            "name": "activeAudioFormats",
            "summary": "Get a list of the active audio formats currently used across all media pipelines.",
            "tags": [
                {
                    "name": "property:readonly"
                },
                {
                    "name": "capabilities",
                    "x-manages": [
                        "xrn:firebolt:capability:media-info:audio-format"
                    ]
                }
            ],
            "params": [],
            "result": {
                "name": "activeAudioFormats",
                "summary": "The active audio formats used across all pipelines.",
                "schema": {
                    "type": "array",
                    "items": {
                        "$ref": "#/components/schemas/AudioFormat"
                    }
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [],
                    "result": {
                        "name": "Default Result",
                        "value": [
                            {
                                "bitRate": 128,
                                "channels": "2",
                                "format": "aac",
                                "codecProfile": "mp2lc",
                                "container": "audio/mp4",
                                "pipelineId": 1,
                                "sampleRate": 48
                            }
                        ]
                    }
                }
            ]
        },
        {
            "name": "activeVideoFormats",
            "summary": "Get a list of the active video formats currently used across all media pipelines.",
            "tags": [
                {
                    "name": "property:readonly"
                },
                {
                    "name": "capabilities",
                    "x-manages": [
                        "xrn:firebolt:capability:media-info:video-format"
                    ]
                }
            ],
            "params": [],
            "result": {
                "name": "activeVideoFormats",
                "summary": "The active video formats used across all pipelines.",
                "schema": {
                    "type": "array",
                    "items": {
                        "$ref": "#/components/schemas/VideoFormat"
                    }
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [],
                    "result": {
                        "name": "Default Result",
                        "value": [
                            {
                                "codecLevel": "4.2",
                                "codecProfile": "main",
                                "container": "video/mp4",
                                "format": "hevc",
                                "frameRate": 30,
                                "hdr": [
                                    "hdr10"
                                ],
                                "pipelineId": 1,
                                "resolution": {
                                    "width": 1920,
                                    "height": 1080
                                }
                            }
                        ]
                    }
                }
            ]
        },
        {
            "name": "audioFormat",
            "summary": "Get the audio format currently used by the specified media pipeline.",
            "tags": [
                {
                    "name": "property:readonly"
                },
                {
                    "name": "capabilities",
                    "x-uses": [
                        "xrn:firebolt:capability:media-info:audio-format"
                    ]
                }
            ],
            "params": [
                {
                    "name": "pipelineId",
                    "required": true,
                    "schema": {
                        "$ref": "#/components/schemas/PipelineId"
                    }
                }
            ],
            "result": {
                "name": "audioFormat",
                "summary": "Audio format used by the pipeline.",
                "schema": {
                    "$ref": "#/components/schemas/AudioFormat"
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [
                        {
                            "name": "pipelineId",
                            "value": 1
                        }
                    ],
                    "result": {
                        "name": "Default Result",
                        "value": {
                            "bitRate": 128,
                            "channels": "2",
                            "container": "audio/mp4",
                            "format": "aac",
                            "pipelineId": 1,
                            "sampleRate": 48
                        }
                    }
                }
            ]
        },
        {
            "name": "videoFormat",
            "summary": "Get the video format currently used by the specified media pipeline.",
            "tags": [
                {
                    "name": "property:readonly"
                },
                {
                    "name": "capabilities",
                    "x-uses": [
                        "xrn:firebolt:capability:media-info:video-format"
                    ]
                }
            ],
            "params": [
                {
                    "name": "pipelineId",
                    "required": true,
                    "schema": {
                        "$ref": "#/components/schemas/PipelineId"
                    }
                }
            ],
            "result": {
                "name": "videoFormat",
                "summary": "Video format used by the pipeline.",
                "schema": {
                    "$ref": "#/components/schemas/VideoFormat"
                }
            },
            "examples": [
                {
                    "name": "Default Example",
                    "params": [
                        {
                            "name": "pipelineId",
                            "value": 1
                        }
                    ],
                    "result": {
                        "name": "Default Result",
                        "value": {
                            "codecLevel": "4.2",
                            "codecProfile": "main",
                            "container": "video/mp4",
                            "format": "hevc",
                            "frameRate": 30,
                            "hdr": [
                                "hdr10"
                            ],
                            "pipelineId": 1,
                            "resolution": {
                                "width": 1920,
                                "height": 1080
                            }
                        }
                    }
                }
            ]
        }
    ],
    "components": {
        "schemas": {
            "AudioFormat": {
                "type": "object",
                "description": "Details on the audio content format.",
                "properties": {
                    "bitRate": {
                        "description": "The audio bitrate in kbps.",
                        "type": "number"
                    },
                    "channels": {
                        "description": "The audio output channels.",
                        "type": "string"
                    },
                    "codecLevel": {
                        "$ref": "https://meta.comcast.com/firebolt/schemas/media#/definitions/AudioCodecLevel"
                    },
                    "codecProfile": {
                        "$ref": "https://meta.comcast.com/firebolt/schemas/media#/definitions/AudioCodecProfile"
                    },
                    "container": {
                        "$ref": "https://meta.comcast.com/firebolt/schemas/media#/definitions/AudioContainer"
                    },
                    "format": {
                        "$ref": "https://meta.comcast.com/firebolt/schemas/media#/definitions/AudioFormat"
                    },
                    "pipelineId": {
                        "$ref": "#/components/schemas/PipelineId"
                    },
                    "sampleRate": {
                        "description": "The audio sample rate in kHz.",
                        "type": "number"
                    }
                },
                "required": [
                    "format",
                    "channels",
                    "pipelineId",
                    "sampleRate"
                ]
            },
            "PipelineId": {
                "type": "integer",
                "description": "The media pipeline/session ID",
                "minimum": 0,
                "maximum": 15
            },
            "VideoFormat": {
                "type": "object",
                "description": "Details on the video content format.",
                "properties": {
                    "codecLevel": {
                        "type": "string",
                        "enum": [
                            "4.1",
                            "4.2",
                            "5.0",
                            "5.1",
                            "high",
                            "main"
                        ]
                    },
                    "codecProfile": {
                        "type": "string",
                        "enum": [
                            "high",
                            "main",
                            "main10",
                            "p0",
                            "p2"
                        ]
                    },
                    "container": {
                        "$ref": "https://meta.comcast.com/firebolt/schemas/media#/definitions/VideoContainer"
                    },
                    "format": {
                        "$ref": "https://meta.comcast.com/firebolt/schemas/media#/definitions/VideoFormat"
                    },
                    "frameRate": {
                        "type": "number"
                    },
                    "hdr": {
                        "type": "array",
                        "items": {
                            "$ref": "https://meta.comcast.com/firebolt/schemas/media#/definitions/HDRProfile"
                        }
                    },
                    "pipelineId": {
                        "$ref": "#/components/schemas/PipelineId"
                    },
                    "resolution": {
                        "$ref": "https://meta.comcast.com/firebolt/types#/definitions/Dimensions"
                    }
                },
                "required": [
                    "format",
                    "hdr",
                    "pipelineId",
                    "resolution"
                ]
            }
        }
    }
}
